# Export - Schema

ìŠ¤í‚¤ë§ˆ ìƒì„±

```sql
ğŸ’™(ğŸ’š)
-- 0. í…ŒìŠ¤íŠ¸ í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ ìƒì„±
create tablespace ts_test1 datafile '/oracle12/app/oracle/oradata/db1/ts_test1_01.dbf' size 50m;
-- 1. í…ŒìŠ¤íŠ¸ ìœ ì € ìƒì„±
create user tuser identified by oracle
default tablespace ts_test1
quota unlimited on ts_test1
quota 50m on system;
grant create session to tuser;
grant create synonym to tuser;

-- 2. í…ŒìŠ¤íŠ¸ ìœ ì € ì†Œìœ  í…Œì´ë¸” / ì˜¤ë¸Œì íŠ¸ ìƒì„±
1) table 3ê°œ
create table tuser.test1 (no number, name varchar2(10));
insert into tuser.test1 
select 1, 'a' from dual
 union all 
select 2, 'b' from dual
 union all 
select 3, 'c' from dual;
commit;
create table tuser.test2
as
select *
  from tuser.test1;
create table tuser.test3
as
select *
  from tuser.test1;
  
select * from tuser.test1;
select * from tuser.test2;
select * from tuser.test3;

2) index 1ê°œ
create index tuser.idx_test1_name on tuser.test1(name);
create index tuser.idx_test2_name on tuser.test2(name);
create index tuser.idx_test3_name on tuser.test3(name);
3) private synonym 1ê°œì”©(at tuser session)
create synonym t1 for tuser.test1;
create synonym t2 for tuser.test2;
create synonym t3 for tuser.test3;
4) í…ŒìŠ¤íŠ¸ ìœ ì €ê°€ ë³¸ì¸ ì†Œìœ ì˜ í…Œì´ë¸” ì¡°íšŒê¶Œí•œì„ scottê³„ì •ì— ë¶€ì—¬(at tuser session)
grant select on tuser.test1 to scott;
grant select on tuser.test2 to scott;
grant select on tuser.test3 to scott;
```

ìŠ¤í‚¤ë§ˆ ë‹¨ìœ„ export

```shell
exp system/oracle file=exp_test_schema.dmp owner=tuser
```

import ì´ì „ ë™ì¼í™˜ê²½ ì¡°ì„±

```sql
create tablespace ts_test1 datafile '/oracle12/app/oracle/oradata/db1/ts_test1_01.dbf' size 50m;
create user tuser identified by oracle
default tablespace ts_test1
quota unlimited on ts_test1
quota 50m on system;
grant create session to tuser;
grant create synonym to tuser;
```

ìŠ¤í‚¤ë§ˆ ë‹¨ìœ„ import

```shell
local
ğŸ’™scp exp_test_schema.dmp oracle@172.16.192.131:/home/oracle/exp
ğŸ’šimp system/oracle file=exp_test_schema.dmp log=exp_test_schema.log ignore=y fromuser=tuser
remote
ğŸ’™imp system/oracle@green_db1 file=exp_test_schema.dmp log=exp_test_schema.log ignore=y fromuser=tuser
```

import ì´í›„ í™•ì¸

```sql
-- at tuser|system session
select * from dba_users where username = 'TUSER';
select * from dba_tablespaces where tablespace_name = 'TS_TEST1'; 
select * from dba_tables where tablespace_name = 'TS_TEST1';
select * from dba_indexes where tablespace_name = 'TS_TEST1';
select * from dba_synonyms where owner = 'TUSER';
select * from tuser.t1;
select * from tuser.t2;
select * from tuser.t3;
select * from tuser.test1;
select * from tuser.test2;
select * from tuser.test3;

-- at scott session
select * from tuser.t1;
select * from tuser.t2;
select * from tuser.t3;
select * from tuser.test1;
select * from tuser.test2;
select * from tuser.test3;
```

---

## ê²°ê³¼

ğŸ’šì— tablespaceì™€ userê°€ ìˆì–´ì•¼ë§Œ ì˜¨ì „íˆ ì´ê´€ì‘ì—…ì´ ìˆ˜í–‰ë¨.

í•˜ì§€ë§Œ ğŸ’šì— user: tuserê°€ ì—†ê³ , tablespace: ts_test1ê°€ ì—†ëŠ” ê²½ìš°
impë¥¼ ìˆ˜í–‰í•˜ëŠ” ìœ ì € ì†Œìœ ì˜ ì˜¤ë¸Œì íŠ¸ê°€ ìƒì„±ë˜ê³ , í•´ë‹¹ ìœ ì €ì˜ default tablespaceê°€ ì €ì¥ë¨.

ë§Œì•½ ë‹¤ë¥¸ ìœ ì €ì— ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•˜ê³ ìí•  ê²½ìš°

```shell
hr ìœ ì €ì— ì˜¤ë¸Œì íŠ¸ ìƒì„±í•  ê²½ìš°
imp system/oracle@green_db1 file=exp_test_schema.dmp full=y ignore=y touser=hr
```

