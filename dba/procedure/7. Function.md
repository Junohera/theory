[toc]

# Function

input valueì™€ output valueì˜ ê´€ê³„ë¥¼ ì •ì˜í•˜ëŠ” ê°ì²´
input valueëŠ” ìƒëµë  ìˆ˜ ìˆê³ , ë‹¤ìˆ˜ ì „ë‹¬ ê°€ëŠ¥(default ê°’ ì„ ì–¸ ê°€ëŠ¥)

ğŸ’¥ì£¼ì˜ì‚¬í•­
function/triggerë¥¼ í†µí•´ ìˆ˜ì •ì‹œ old valueì™€ new valueë¥¼ êµ¬ë¶„í•˜ì§€ ì•Šìœ¼ë©´
dml ìˆ˜í–‰ ë¶ˆê°€(ê°™ì€ ë°ì´í„°ë¥¼ ì—´ì–´ë‘ê³  ìˆ˜ì •í•˜ëŠ” í–‰ìœ„ì— ëŒ€í•´ ì—ëŸ¬ ì²˜ë¦¬)

## syntax

```sql
-- define
create [or replace] function FUNCTION_NAME
	(input_value1		data_type	[:=value	|	default value]],
   input_value2		data_type	[:=value	|	default value]],
   ...
  )
  return data_type
is
	pl/sql block
	return ë³€ìˆ˜ëª…
/

-- call
select function_name(input)
  from dual;  
```

## Tutorial

### case 1) create function

```sql
create or replace function get_today
return char
is
  result char(19);
  begin
    select to_char(sysdate, 'YYYY-MM-DD HH24:MI:SS')
      into result
      from dual;
      
    return result;
  end;
/

select object_name,
       object_type
  from user_procedures
 where object_type = 'FUNCTION';
desc get_today;

select get_today()
  from dual;
```

### case 2) ì…ë ¥ë°›ì€ ë¶€ì„œë²ˆí˜¸ì— í•´ë‹¹í•˜ëŠ” ìµœëŒ€ê¸‰ì—¬ë¥¼ ë°˜í™˜

```sql
create or replace function get_max_sal_by_department
(ideptno scott.emp.deptno%type)
return number
is
  max_sal scott.emp.sal%type;
  begin
    select max(sal) into max_sal
      from emp
     where deptno = ideptno;
    return max_sal;
  end;
/

select get_max_sal_by_department(10)
  from dual;
select ename, sal, deptno, get_max_sal_by_department(deptno)
  from emp
 where sal = get_max_sal_by_department(deptno);
```

### case 3) ì…ë ¥ë°›ì€ í•™ë²ˆì— í•´ë‹¹í•˜ëŠ” í•™ì  ë°˜í™˜

```sql
create or replace function get_hakjum_by_studno
(istudno scott.student.studno%type)
return scott.hakjum.grade%type
is
	vhakjum	scott.hakjum.grade%type;
	begin
		select (select grade 
              from hakjum 
             where (select total 
                      from exam_01 
                     where studno = s.studno) between min_point
            																		  and max_point) 
		  into vhakjum
		  from student s
		 where s.studno = istudno;
		return vhakjum;
	end;
/

select object_name,
       object_type
  from user_procedures
 where 1=1
   and object_type = 'FUNCTION'
   and object_name like '%HAKJUM%';
desc get_hakjum_by_studno;
select get_hakjum_by_studno(9411)
  from dual;
```

### case 4) ê³ ê°ì´ ê°€ì ¸ê°ˆ ìˆ˜ ìˆëŠ” ìµœëŒ€ ìƒí’ˆì„ ì¶œë ¥í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ì‘ì„± í›„, ê³ ê° ì¡°íšŒ(gogak, gift)

```sql
create or replace function get_max_gift
(igno scott.gogak.gno%type)
return varchar2
is
  gname scott.gift.gname%type;
  begin
    select gf.gname
      into gname
      from gogak gg, gift gf
     where gg.point between gf.g_start and gf.g_end
       and gg.gno = igno;
    return gname;
  end;
/
select g.*, get_max_gift(gno)
  from gogak g;
```

