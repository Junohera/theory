[toc]

# Package

## Management

### 1. describe

```sql
select *
  from dba_procedures
 where 1=1
 	 and object_type = 'PACKAGE'
   and owner = 'SCOTT'
 order by object_name, subprogram_id;
 
select *
  from dba_objects
 where 1=1
   and object_type = 'PACKAGE'
   and owner = 'SCOTT';
```



## tutorial

### 1. 입력변수 없는 패키지 생성

> package pkg_emp_sal_total
> 	void sum
> 	void avg

#### Specification

```sql
create or replace package pkg_emp_sal_total
is
	procedure sum;
  procedure avg;
end pkg_emp_sal_total;
/
```

#### **Subprogram**

```sql
create or replace package body pkg_emp_sal_total
is
procedure sum
is
	total_count     number;
  result          number;
	begin
		select count(empno), round(sum(sal))
      into total_count, result
		  from emp;
      
    dbms_output.put_line('인원수: '||total_count||', 급여총합: '||result);
      
	end sum;
procedure avg
is
	total_count     number;
  result          number;
	begin
		select count(empno), round(avg(sal))
      into total_count, result
		  from emp;
      
    dbms_output.put_line('인원수: '||total_count||', 급여평균: '||result);
      
	end avg;
end pkg_emp_sal_total;
/
```

#### Execute

```sql
exec pkg_emp_sal_total.sum;
exec pkg_emp_sal_total.avg;
```

### 2. 입력변수 있는 패키지 생성

>패키지 생성
>
>- 입력받은 학생번호에 해당하는 이름과 몸무게를 출력하는 프로시져
>- 입력받은 학생번호에 해당하는 이름과 키를 출력하는 프로시져
>
>package pkg_student
>
>- void sum
>- void avg

```sql
create or replace package pkg_student
is
	procedure print_weight (istudno in scott.student.studno%type);
  procedure print_height (istudno in scott.student.studno%type);
end pkg_student;
/

create or replace package body pkg_student
is
procedure print_weight
(istudno scott.student.studno%type)
is
  vname     scott.student.name%type;
  result    scott.student.weight%type;
	begin
    select name, weight
      into vname, result
      from scott.student
     where studno = istudno;
     
    dbms_output.put_line('이름: '||vname||', 몸무게: '||result);
	end print_weight;
procedure print_height
(istudno scott.student.studno%type)
is
  vname    scott.student.name%type;
  result  scott.student.height%type;
	begin
    select name, height
      into vname, result
      from scott.student
     where studno = istudno;
    dbms_output.put_line('이름: '||vname||', 키: '||result);
	end print_height;
end pkg_student;
/

exec pkg_student.print_weight(9411);
exec pkg_student.print_height(9411);
```

